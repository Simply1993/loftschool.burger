/* Hamburger menu */
let hamburger = (function (options) {
	let button = document.querySelector(options.button);
	let menu = document.querySelector(options.menu);
	let list = document.querySelector(".mobile-menu__list");

	let _openMenu = function (e) {
		e.preventDefault();
		menu.classList.toggle("active");
		document.body.classList.toggle("lock");
	};

	let closeMenu = function closeMenu(e) {
		e.preventDefault();
		if (e.target.className == "mobile-menu__link") {
			menu.classList.remove("active");
			document.body.classList.remove("lock");
		}
	};

	let addListeners = function () {
		button.addEventListener("click", _openMenu);

		list.addEventListener("click", closeMenu);
	};

	return {
		init: addListeners
	};
})({
	button: ".hamburger-menu-btn",
	menu: ".mobile-menu"
});

hamburger.init();

/* Vertical Accordeon */
// let verticalAccordeon = (function (options) {
// 	let list = document.querySelector(options.listSelector);
// 	let itemsList = list.querySelectorAll('.accordeon__item');
//
// 	let _getHeight = function _getHeight(elem) {
// 		let height = elem.scrollHeight + 'px';
// 		return height;
// 	};
//
// 	let _toogleItems = function (e) {
// 		e.preventDefault();
//
// 		if (e.target.className == options.linkClass) {
// 			let item = e.target.parentNode;
// 			let contentItem = item.querySelector('.accordeon__item-content');
//
// 			if (!item.classList.contains(options.activeItemClass)) {
// 				_closeItems(itemsList);
// 				_openItem(item, contentItem);
// 			} else {
// 				_closeItem(item, contentItem);
// 			}
// 		}
// 	};
//
// 	let _openItem = function _openItem(item, contentItem) {
// 		let contentHeight = _getHeight(contentItem);
//
// 		item.classList.toggle(options.activeItemClass);
// 		contentItem.style.height = contentHeight;
// 	};
//
// 	let _closeItem = function _closeItem(item, contentItem) {
// 		contentItem.style.height = '';
// 		item.classList.remove(options.activeItemClass);
// 	};
//
// 	let _closeItems = function _closeItems(items) {
// 		for (let i = 0; i < items.length; i++) {
// 			let contentItem = items[i].querySelector('.accordeon__item-content');
// 			_closeItem(items[i], contentItem);
// 		}
// 	};
//
// 	let addListeners = function () {
// 		list.addEventListener('click', _toogleItems)
// 	};
//
// 	return {
// 		init: addListeners
// 	}
// })({
// 	listSelector: ".accordeon__list",
// 	linkClass: "accordeon__trigger",
// 	activeItemClass: "accordeon__item--active",
// });
//
// verticalAccordeon.init();

/* Horizontal Accordeon */
// let horizontalAccordeon = (function (options) {
// 	let list = document.querySelector('.'+options.list);
// 	let itemsList = list.querySelectorAll('.'+options.item);
//
// 	/* calculate needed width */
// 	let userWidth = window.innerWidth;
// 	let titleItem = list.querySelector('.'+options.link);
// 	let widthTitle = titleItem.clientWidth;
// 	let neededWidth = userWidth - itemsList.length * widthTitle;
// 	console.log(neededWidth);
// 	neededWidth = (neededWidth > 520) ? 520 : neededWidth;
//
// 	let _toogleItems = function (e) {
// 		e.preventDefault();
//
// 		if (e.target.className == options.link) {
// 			let item = e.target.parentNode;
// 			let contentItem = item.querySelector('.'+options.content);
//
// 			if (!item.classList.contains(options.activeItem)) {
// 				_closeItems(itemsList);
// 				_openItem(item, contentItem);
// 			} else {
// 				_closeItem(item, contentItem);
// 			}
// 		}
// 	};
//
// 	let _openItem = function _openItem(item, contentItem) {
// 		item.classList.toggle(options.activeItem);
// 		contentItem.style.width = neededWidth + 'px';
// 	};
//
// 	let _closeItem = function _closeItem(item, contentItem) {
// 		contentItem.style.width = '';
// 		item.classList.remove(options.activeItem);
// 	};
//
// 	let _closeItems = function _closeItems(items) {
// 		for (let i = 0; i < items.length; i++) {
// 			let contentItem = items[i].querySelector('.'+options.content);
// 			_closeItem(items[i], contentItem);
// 		}
// 	};
//
// 	let addListeners = function () {
// 		list.addEventListener('click', _toogleItems)
// 	};
//
// 	return {
// 		init: addListeners
// 	}
// })({
// 	list: "menu-accordeon__list",
// 	item: "menu-accordeon__item",
// 	activeItem: "menu-accordeon__item--active",
// 	link: "menu-accordeon__trigger",
// 	content: "menu-accordeon__item-content"
// });
//
// horizontalAccordeon.init();

/* multi-accordeon */
let multiAcco = function (options) {
	let list = document.querySelector('.'+options.list);
	let itemsList = list.querySelectorAll('.'+options.item);

	if (options.direction == "horizontal") {
		/* for calculate needed width */
		let userWidth = window.innerWidth;
		let titleItem = list.querySelector('.'+options.link);
		let widthTitle = titleItem.clientWidth;
		var neededWidth = userWidth - itemsList.length * widthTitle;
		neededWidth = (neededWidth > 520) ? '520px' : neededWidth + 'px';
	} else if (options.direction == "vertical") {
		/* for calculate needed height */
		var _getHeight = function(elem) {
			let height = elem.scrollHeight + 'px';
			return height;
		};
	}

	let _toogleItems = function (e) {
		e.preventDefault();

		if (e.target.className == options.link) {
			let item = e.target.parentNode;
			let contentItem = item.querySelector('.'+options.content);

			if (!item.classList.contains(options.activeItem)) {
				_closeItems(itemsList);
				_openItem(item, contentItem);
			} else {
				_closeItem(item, contentItem);
			}
		}
	};

	let _openItem = function(item, contentItem) {
		if (options.direction == "horizontal") {
			contentItem.style.width = neededWidth;
		} else if (options.direction == "vertical") {
			let contentHeight = _getHeight(contentItem);
			contentItem.style.height = contentHeight;
		}
		item.classList.toggle(options.activeItem);
	};

	let _closeItem = function(item, contentItem) {
		if (options.direction == "horizontal") {
			contentItem.style.width = '';
		} else if (options.direction == "vertical") {
			contentItem.style.height = '';
		}

		item.classList.remove(options.activeItem);
	};

	let _closeItems = function(items) {
		for (let i = 0; i < items.length; i++) {
			let contentItem = items[i].querySelector('.'+options.content);
			_closeItem(items[i], contentItem);
		}
	};

	let addListeners = function () {
		list.addEventListener('click', _toogleItems)
	};

	return {
		init: addListeners
	}
};

multiAcco({
	direction: "horizontal",
	list: "menu-accordeon__list",
	item: "menu-accordeon__item",
	activeItem: "menu-accordeon__item--active",
	link: "menu-accordeon__trigger",
	content: "menu-accordeon__item-content"
}).init();

multiAcco({
	direction: "vertical",
	list: "accordeon__list",
	item: "accordeon__item",
	activeItem: "accordeon__item--active",
	link: "accordeon__trigger",
	content: "accordeon__item-content"
}).init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBIYW1idXJnZXIgbWVudSAqL1xubGV0IGhhbWJ1cmdlciA9IChmdW5jdGlvbiAob3B0aW9ucykge1xuXHRsZXQgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLmJ1dHRvbik7XG5cdGxldCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLm1lbnUpO1xuXHRsZXQgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9iaWxlLW1lbnVfX2xpc3RcIik7XG5cblx0bGV0IF9vcGVuTWVudSA9IGZ1bmN0aW9uIChlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdG1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcblx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJsb2NrXCIpO1xuXHR9O1xuXG5cdGxldCBjbG9zZU1lbnUgPSBmdW5jdGlvbiBjbG9zZU1lbnUoZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRpZiAoZS50YXJnZXQuY2xhc3NOYW1lID09IFwibW9iaWxlLW1lbnVfX2xpbmtcIikge1xuXHRcdFx0bWVudS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuXHRcdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwibG9ja1wiKTtcblx0XHR9XG5cdH07XG5cblx0bGV0IGFkZExpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcblx0XHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF9vcGVuTWVudSk7XG5cblx0XHRsaXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZU1lbnUpO1xuXHR9O1xuXG5cdHJldHVybiB7XG5cdFx0aW5pdDogYWRkTGlzdGVuZXJzXG5cdH07XG59KSh7XG5cdGJ1dHRvbjogXCIuaGFtYnVyZ2VyLW1lbnUtYnRuXCIsXG5cdG1lbnU6IFwiLm1vYmlsZS1tZW51XCJcbn0pO1xuXG5oYW1idXJnZXIuaW5pdCgpO1xuXG4vKiBWZXJ0aWNhbCBBY2NvcmRlb24gKi9cbi8vIGxldCB2ZXJ0aWNhbEFjY29yZGVvbiA9IChmdW5jdGlvbiAob3B0aW9ucykge1xuLy8gXHRsZXQgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy5saXN0U2VsZWN0b3IpO1xuLy8gXHRsZXQgaXRlbXNMaXN0ID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjb3JkZW9uX19pdGVtJyk7XG4vL1xuLy8gXHRsZXQgX2dldEhlaWdodCA9IGZ1bmN0aW9uIF9nZXRIZWlnaHQoZWxlbSkge1xuLy8gXHRcdGxldCBoZWlnaHQgPSBlbGVtLnNjcm9sbEhlaWdodCArICdweCc7XG4vLyBcdFx0cmV0dXJuIGhlaWdodDtcbi8vIFx0fTtcbi8vXG4vLyBcdGxldCBfdG9vZ2xlSXRlbXMgPSBmdW5jdGlvbiAoZSkge1xuLy8gXHRcdGUucHJldmVudERlZmF1bHQoKTtcbi8vXG4vLyBcdFx0aWYgKGUudGFyZ2V0LmNsYXNzTmFtZSA9PSBvcHRpb25zLmxpbmtDbGFzcykge1xuLy8gXHRcdFx0bGV0IGl0ZW0gPSBlLnRhcmdldC5wYXJlbnROb2RlO1xuLy8gXHRcdFx0bGV0IGNvbnRlbnRJdGVtID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkZW9uX19pdGVtLWNvbnRlbnQnKTtcbi8vXG4vLyBcdFx0XHRpZiAoIWl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKG9wdGlvbnMuYWN0aXZlSXRlbUNsYXNzKSkge1xuLy8gXHRcdFx0XHRfY2xvc2VJdGVtcyhpdGVtc0xpc3QpO1xuLy8gXHRcdFx0XHRfb3Blbkl0ZW0oaXRlbSwgY29udGVudEl0ZW0pO1xuLy8gXHRcdFx0fSBlbHNlIHtcbi8vIFx0XHRcdFx0X2Nsb3NlSXRlbShpdGVtLCBjb250ZW50SXRlbSk7XG4vLyBcdFx0XHR9XG4vLyBcdFx0fVxuLy8gXHR9O1xuLy9cbi8vIFx0bGV0IF9vcGVuSXRlbSA9IGZ1bmN0aW9uIF9vcGVuSXRlbShpdGVtLCBjb250ZW50SXRlbSkge1xuLy8gXHRcdGxldCBjb250ZW50SGVpZ2h0ID0gX2dldEhlaWdodChjb250ZW50SXRlbSk7XG4vL1xuLy8gXHRcdGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZShvcHRpb25zLmFjdGl2ZUl0ZW1DbGFzcyk7XG4vLyBcdFx0Y29udGVudEl0ZW0uc3R5bGUuaGVpZ2h0ID0gY29udGVudEhlaWdodDtcbi8vIFx0fTtcbi8vXG4vLyBcdGxldCBfY2xvc2VJdGVtID0gZnVuY3Rpb24gX2Nsb3NlSXRlbShpdGVtLCBjb250ZW50SXRlbSkge1xuLy8gXHRcdGNvbnRlbnRJdGVtLnN0eWxlLmhlaWdodCA9ICcnO1xuLy8gXHRcdGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShvcHRpb25zLmFjdGl2ZUl0ZW1DbGFzcyk7XG4vLyBcdH07XG4vL1xuLy8gXHRsZXQgX2Nsb3NlSXRlbXMgPSBmdW5jdGlvbiBfY2xvc2VJdGVtcyhpdGVtcykge1xuLy8gXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbi8vIFx0XHRcdGxldCBjb250ZW50SXRlbSA9IGl0ZW1zW2ldLnF1ZXJ5U2VsZWN0b3IoJy5hY2NvcmRlb25fX2l0ZW0tY29udGVudCcpO1xuLy8gXHRcdFx0X2Nsb3NlSXRlbShpdGVtc1tpXSwgY29udGVudEl0ZW0pO1xuLy8gXHRcdH1cbi8vIFx0fTtcbi8vXG4vLyBcdGxldCBhZGRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4vLyBcdFx0bGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF90b29nbGVJdGVtcylcbi8vIFx0fTtcbi8vXG4vLyBcdHJldHVybiB7XG4vLyBcdFx0aW5pdDogYWRkTGlzdGVuZXJzXG4vLyBcdH1cbi8vIH0pKHtcbi8vIFx0bGlzdFNlbGVjdG9yOiBcIi5hY2NvcmRlb25fX2xpc3RcIixcbi8vIFx0bGlua0NsYXNzOiBcImFjY29yZGVvbl9fdHJpZ2dlclwiLFxuLy8gXHRhY3RpdmVJdGVtQ2xhc3M6IFwiYWNjb3JkZW9uX19pdGVtLS1hY3RpdmVcIixcbi8vIH0pO1xuLy9cbi8vIHZlcnRpY2FsQWNjb3JkZW9uLmluaXQoKTtcblxuLyogSG9yaXpvbnRhbCBBY2NvcmRlb24gKi9cbi8vIGxldCBob3Jpem9udGFsQWNjb3JkZW9uID0gKGZ1bmN0aW9uIChvcHRpb25zKSB7XG4vLyBcdGxldCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicrb3B0aW9ucy5saXN0KTtcbi8vIFx0bGV0IGl0ZW1zTGlzdCA9IGxpc3QucXVlcnlTZWxlY3RvckFsbCgnLicrb3B0aW9ucy5pdGVtKTtcbi8vXG4vLyBcdC8qIGNhbGN1bGF0ZSBuZWVkZWQgd2lkdGggKi9cbi8vIFx0bGV0IHVzZXJXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuLy8gXHRsZXQgdGl0bGVJdGVtID0gbGlzdC5xdWVyeVNlbGVjdG9yKCcuJytvcHRpb25zLmxpbmspO1xuLy8gXHRsZXQgd2lkdGhUaXRsZSA9IHRpdGxlSXRlbS5jbGllbnRXaWR0aDtcbi8vIFx0bGV0IG5lZWRlZFdpZHRoID0gdXNlcldpZHRoIC0gaXRlbXNMaXN0Lmxlbmd0aCAqIHdpZHRoVGl0bGU7XG4vLyBcdGNvbnNvbGUubG9nKG5lZWRlZFdpZHRoKTtcbi8vIFx0bmVlZGVkV2lkdGggPSAobmVlZGVkV2lkdGggPiA1MjApID8gNTIwIDogbmVlZGVkV2lkdGg7XG4vL1xuLy8gXHRsZXQgX3Rvb2dsZUl0ZW1zID0gZnVuY3Rpb24gKGUpIHtcbi8vIFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG4vL1xuLy8gXHRcdGlmIChlLnRhcmdldC5jbGFzc05hbWUgPT0gb3B0aW9ucy5saW5rKSB7XG4vLyBcdFx0XHRsZXQgaXRlbSA9IGUudGFyZ2V0LnBhcmVudE5vZGU7XG4vLyBcdFx0XHRsZXQgY29udGVudEl0ZW0gPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy4nK29wdGlvbnMuY29udGVudCk7XG4vL1xuLy8gXHRcdFx0aWYgKCFpdGVtLmNsYXNzTGlzdC5jb250YWlucyhvcHRpb25zLmFjdGl2ZUl0ZW0pKSB7XG4vLyBcdFx0XHRcdF9jbG9zZUl0ZW1zKGl0ZW1zTGlzdCk7XG4vLyBcdFx0XHRcdF9vcGVuSXRlbShpdGVtLCBjb250ZW50SXRlbSk7XG4vLyBcdFx0XHR9IGVsc2Uge1xuLy8gXHRcdFx0XHRfY2xvc2VJdGVtKGl0ZW0sIGNvbnRlbnRJdGVtKTtcbi8vIFx0XHRcdH1cbi8vIFx0XHR9XG4vLyBcdH07XG4vL1xuLy8gXHRsZXQgX29wZW5JdGVtID0gZnVuY3Rpb24gX29wZW5JdGVtKGl0ZW0sIGNvbnRlbnRJdGVtKSB7XG4vLyBcdFx0aXRlbS5jbGFzc0xpc3QudG9nZ2xlKG9wdGlvbnMuYWN0aXZlSXRlbSk7XG4vLyBcdFx0Y29udGVudEl0ZW0uc3R5bGUud2lkdGggPSBuZWVkZWRXaWR0aCArICdweCc7XG4vLyBcdH07XG4vL1xuLy8gXHRsZXQgX2Nsb3NlSXRlbSA9IGZ1bmN0aW9uIF9jbG9zZUl0ZW0oaXRlbSwgY29udGVudEl0ZW0pIHtcbi8vIFx0XHRjb250ZW50SXRlbS5zdHlsZS53aWR0aCA9ICcnO1xuLy8gXHRcdGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShvcHRpb25zLmFjdGl2ZUl0ZW0pO1xuLy8gXHR9O1xuLy9cbi8vIFx0bGV0IF9jbG9zZUl0ZW1zID0gZnVuY3Rpb24gX2Nsb3NlSXRlbXMoaXRlbXMpIHtcbi8vIFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4vLyBcdFx0XHRsZXQgY29udGVudEl0ZW0gPSBpdGVtc1tpXS5xdWVyeVNlbGVjdG9yKCcuJytvcHRpb25zLmNvbnRlbnQpO1xuLy8gXHRcdFx0X2Nsb3NlSXRlbShpdGVtc1tpXSwgY29udGVudEl0ZW0pO1xuLy8gXHRcdH1cbi8vIFx0fTtcbi8vXG4vLyBcdGxldCBhZGRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4vLyBcdFx0bGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF90b29nbGVJdGVtcylcbi8vIFx0fTtcbi8vXG4vLyBcdHJldHVybiB7XG4vLyBcdFx0aW5pdDogYWRkTGlzdGVuZXJzXG4vLyBcdH1cbi8vIH0pKHtcbi8vIFx0bGlzdDogXCJtZW51LWFjY29yZGVvbl9fbGlzdFwiLFxuLy8gXHRpdGVtOiBcIm1lbnUtYWNjb3JkZW9uX19pdGVtXCIsXG4vLyBcdGFjdGl2ZUl0ZW06IFwibWVudS1hY2NvcmRlb25fX2l0ZW0tLWFjdGl2ZVwiLFxuLy8gXHRsaW5rOiBcIm1lbnUtYWNjb3JkZW9uX190cmlnZ2VyXCIsXG4vLyBcdGNvbnRlbnQ6IFwibWVudS1hY2NvcmRlb25fX2l0ZW0tY29udGVudFwiXG4vLyB9KTtcbi8vXG4vLyBob3Jpem9udGFsQWNjb3JkZW9uLmluaXQoKTtcblxuLyogbXVsdGktYWNjb3JkZW9uICovXG5sZXQgbXVsdGlBY2NvID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcblx0bGV0IGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJytvcHRpb25zLmxpc3QpO1xuXHRsZXQgaXRlbXNMaXN0ID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuJytvcHRpb25zLml0ZW0pO1xuXG5cdGlmIChvcHRpb25zLmRpcmVjdGlvbiA9PSBcImhvcml6b250YWxcIikge1xuXHRcdC8qIGZvciBjYWxjdWxhdGUgbmVlZGVkIHdpZHRoICovXG5cdFx0bGV0IHVzZXJXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdGxldCB0aXRsZUl0ZW0gPSBsaXN0LnF1ZXJ5U2VsZWN0b3IoJy4nK29wdGlvbnMubGluayk7XG5cdFx0bGV0IHdpZHRoVGl0bGUgPSB0aXRsZUl0ZW0uY2xpZW50V2lkdGg7XG5cdFx0dmFyIG5lZWRlZFdpZHRoID0gdXNlcldpZHRoIC0gaXRlbXNMaXN0Lmxlbmd0aCAqIHdpZHRoVGl0bGU7XG5cdFx0bmVlZGVkV2lkdGggPSAobmVlZGVkV2lkdGggPiA1MjApID8gJzUyMHB4JyA6IG5lZWRlZFdpZHRoICsgJ3B4Jztcblx0fSBlbHNlIGlmIChvcHRpb25zLmRpcmVjdGlvbiA9PSBcInZlcnRpY2FsXCIpIHtcblx0XHQvKiBmb3IgY2FsY3VsYXRlIG5lZWRlZCBoZWlnaHQgKi9cblx0XHR2YXIgX2dldEhlaWdodCA9IGZ1bmN0aW9uKGVsZW0pIHtcblx0XHRcdGxldCBoZWlnaHQgPSBlbGVtLnNjcm9sbEhlaWdodCArICdweCc7XG5cdFx0XHRyZXR1cm4gaGVpZ2h0O1xuXHRcdH07XG5cdH1cblxuXHRsZXQgX3Rvb2dsZUl0ZW1zID0gZnVuY3Rpb24gKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRpZiAoZS50YXJnZXQuY2xhc3NOYW1lID09IG9wdGlvbnMubGluaykge1xuXHRcdFx0bGV0IGl0ZW0gPSBlLnRhcmdldC5wYXJlbnROb2RlO1xuXHRcdFx0bGV0IGNvbnRlbnRJdGVtID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuJytvcHRpb25zLmNvbnRlbnQpO1xuXG5cdFx0XHRpZiAoIWl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKG9wdGlvbnMuYWN0aXZlSXRlbSkpIHtcblx0XHRcdFx0X2Nsb3NlSXRlbXMoaXRlbXNMaXN0KTtcblx0XHRcdFx0X29wZW5JdGVtKGl0ZW0sIGNvbnRlbnRJdGVtKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdF9jbG9zZUl0ZW0oaXRlbSwgY29udGVudEl0ZW0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRsZXQgX29wZW5JdGVtID0gZnVuY3Rpb24oaXRlbSwgY29udGVudEl0ZW0pIHtcblx0XHRpZiAob3B0aW9ucy5kaXJlY3Rpb24gPT0gXCJob3Jpem9udGFsXCIpIHtcblx0XHRcdGNvbnRlbnRJdGVtLnN0eWxlLndpZHRoID0gbmVlZGVkV2lkdGg7XG5cdFx0fSBlbHNlIGlmIChvcHRpb25zLmRpcmVjdGlvbiA9PSBcInZlcnRpY2FsXCIpIHtcblx0XHRcdGxldCBjb250ZW50SGVpZ2h0ID0gX2dldEhlaWdodChjb250ZW50SXRlbSk7XG5cdFx0XHRjb250ZW50SXRlbS5zdHlsZS5oZWlnaHQgPSBjb250ZW50SGVpZ2h0O1xuXHRcdH1cblx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUob3B0aW9ucy5hY3RpdmVJdGVtKTtcblx0fTtcblxuXHRsZXQgX2Nsb3NlSXRlbSA9IGZ1bmN0aW9uKGl0ZW0sIGNvbnRlbnRJdGVtKSB7XG5cdFx0aWYgKG9wdGlvbnMuZGlyZWN0aW9uID09IFwiaG9yaXpvbnRhbFwiKSB7XG5cdFx0XHRjb250ZW50SXRlbS5zdHlsZS53aWR0aCA9ICcnO1xuXHRcdH0gZWxzZSBpZiAob3B0aW9ucy5kaXJlY3Rpb24gPT0gXCJ2ZXJ0aWNhbFwiKSB7XG5cdFx0XHRjb250ZW50SXRlbS5zdHlsZS5oZWlnaHQgPSAnJztcblx0XHR9XG5cblx0XHRpdGVtLmNsYXNzTGlzdC5yZW1vdmUob3B0aW9ucy5hY3RpdmVJdGVtKTtcblx0fTtcblxuXHRsZXQgX2Nsb3NlSXRlbXMgPSBmdW5jdGlvbihpdGVtcykge1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGxldCBjb250ZW50SXRlbSA9IGl0ZW1zW2ldLnF1ZXJ5U2VsZWN0b3IoJy4nK29wdGlvbnMuY29udGVudCk7XG5cdFx0XHRfY2xvc2VJdGVtKGl0ZW1zW2ldLCBjb250ZW50SXRlbSk7XG5cdFx0fVxuXHR9O1xuXG5cdGxldCBhZGRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG5cdFx0bGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF90b29nbGVJdGVtcylcblx0fTtcblxuXHRyZXR1cm4ge1xuXHRcdGluaXQ6IGFkZExpc3RlbmVyc1xuXHR9XG59O1xuXG5tdWx0aUFjY28oe1xuXHRkaXJlY3Rpb246IFwiaG9yaXpvbnRhbFwiLFxuXHRsaXN0OiBcIm1lbnUtYWNjb3JkZW9uX19saXN0XCIsXG5cdGl0ZW06IFwibWVudS1hY2NvcmRlb25fX2l0ZW1cIixcblx0YWN0aXZlSXRlbTogXCJtZW51LWFjY29yZGVvbl9faXRlbS0tYWN0aXZlXCIsXG5cdGxpbms6IFwibWVudS1hY2NvcmRlb25fX3RyaWdnZXJcIixcblx0Y29udGVudDogXCJtZW51LWFjY29yZGVvbl9faXRlbS1jb250ZW50XCJcbn0pLmluaXQoKTtcblxubXVsdGlBY2NvKHtcblx0ZGlyZWN0aW9uOiBcInZlcnRpY2FsXCIsXG5cdGxpc3Q6IFwiYWNjb3JkZW9uX19saXN0XCIsXG5cdGl0ZW06IFwiYWNjb3JkZW9uX19pdGVtXCIsXG5cdGFjdGl2ZUl0ZW06IFwiYWNjb3JkZW9uX19pdGVtLS1hY3RpdmVcIixcblx0bGluazogXCJhY2NvcmRlb25fX3RyaWdnZXJcIixcblx0Y29udGVudDogXCJhY2NvcmRlb25fX2l0ZW0tY29udGVudFwiXG59KS5pbml0KCk7Il19
